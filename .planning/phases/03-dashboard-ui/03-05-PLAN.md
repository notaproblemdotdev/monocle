---
phase: 03-dashboard-ui
plan: 05
type: execute
wave: 1
depends_on: []
files_modified:
  - src/monocli/ui/main_screen.py
  - src/monocli/ui/sections.py
autonomous: true
gap_closure: true
must_haves:
  truths:
    - "Dashboard shows 'Merge Requests' section label/header clearly above the two subsections"
    - "Loading spinners are centered both vertically and horizontally within their sections"
    - "MR subsections display with 'Assigned to me' on the left and 'Opened by me' on the right"
  artifacts:
    - path: "src/monocli/ui/main_screen.py"
      provides: "Merge Requests section header label"
      changes:
        - "Label('Merge Requests', classes='section-label') added before MergeRequestContainer"
    - path: "src/monocli/ui/sections.py"
      provides: "Centered spinners and correct subsection order"
      changes:
        - "#spinner-container CSS: height: 100% and content-align: center middle"
        - "MergeRequestContainer.compose() yields assigned_to_me_section first, then opened_by_me_section"
  key_links:
    - from: "src/monocli/ui/main_screen.py"
      to: "src/monocli/ui/sections.py"
      via: "MergeRequestContainer is yielded after Label"
---

<objective>
Fix the three minor UI/layout issues in the dashboard - missing section header, spinner alignment, and subsection ordering.

Purpose: These are cosmetic and minor functional issues that improve the user experience and visual clarity of the dashboard layout.
Output: Properly labeled sections with centered loading spinners and intuitive subsection ordering.
</objective>

<execution_context>
@/Users/pg/.config/opencode/get-shit-done/workflows/execute-plan.md
@/Users/pg/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/03-dashboard-ui/03-dashboard-ui-UAT.md
@.planning/phases/03-dashboard-ui/03-01-SUMMARY.md
@.planning/phases/03-dashboard-ui/03-02-SUMMARY.md
@.planning/phases/03-dashboard-ui/03-03-SUMMARY.md
@src/monocli/ui/main_screen.py
@src/monocli/ui/sections.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Merge Requests section header label</name>
  <files>src/monocli/ui/main_screen.py</files>
  <action>
Add a Label widget before the MergeRequestContainer in the compose() method (around line 116-118).

The CSS class .section-label already exists (lines 76-79) but is never used. Add a Label with this class before yielding MergeRequestContainer.

Current code structure (around lines 116-118):
```python
with Container(classes="dashboard-container"):
    yield MergeRequestContainer(classes="mr-container")
    # ...
```

Updated code:
```python
with Container(classes="dashboard-container"):
    yield Label("Merge Requests", classes="section-label")
    yield MergeRequestContainer(classes="mr-container")
    # ...
```

Make sure to import Label at the top of the file if not already imported:
```python
from textual.widgets import Label  # Add to existing imports
```

Check existing imports around line 1-10 to see what's already imported from textual.widgets.
  </action>
  <verify>Run `grep -n "Label" src/monocli/ui/main_screen.py | head -10` to confirm Label is imported and used with classes="section-label"</verify>
  <done>Label("Merge Requests", classes="section-label") is yielded before MergeRequestContainer in compose()</done>
</task>

<task type="auto">
  <name>Task 2: Center loading spinners vertically and horizontally</name>
  <files>src/monocli/ui/sections.py</files>
  <action>
Update the #spinner-container CSS in sections.py to center spinners properly.

The BaseSection class has a spinner container that needs CSS fixes. Update the CSS to:
1. Change height from auto to 100%
2. Add content-align: center middle

Look for the CSS definition around the class definition or in a CSS class variable. In Textual apps, CSS is often defined as a class variable like:

```python
class BaseSection(Container):
    CSS = """
    BaseSection #spinner-container {
        /* existing styles */
    }
    """
```

Or it might be in the DEFAULT_CSS or as inline styles in the compose method.

Find the #spinner-container styles and update to:
```css
#spinner-container {
    height: 100%;
    content-align: center middle;
    /* keep other existing styles */
}
```

If the spinner container is created in compose() with styles, update those instead.
  </action>
  <verify>Run `grep -A5 -B2 "spinner-container" src/monocli/ui/sections.py` to confirm height: 100% and content-align are set</verify>
  <done>#spinner-container CSS has height: 100% and content-align: center middle</done>
</task>

<task type="auto">
  <name>Task 3: Swap MR subsection order (Assigned first, Opened second)</name>
  <files>src/monocli/ui/sections.py</files>
  <action>
Swap the yield order in MergeRequestContainer.compose() (around lines 397-398) so "Assigned to me" appears on the left (first) and "Opened by me" on the right (second).

Current code (lines 397-398):
```python
def compose(self) -> ComposeResult:
    yield self.opened_by_me_section  # First (left)
    yield self.assigned_to_me_section  # Second (right)
```

Updated code:
```python
def compose(self) -> ComposeResult:
    yield self.assigned_to_me_section  # First (left)
    yield self.opened_by_me_section    # Second (right)
```

This makes the UI display "Assigned to me" on the left and "Opened by me" on the right, which matches the user's expectation that assigned items (more actionable) appear first.
  </action>
  <verify>Run `grep -A3 "def compose" src/monocli/ui/sections.py | grep -A2 "MergeRequestContainer"` or check lines 397-398 to confirm assigned_to_me_section is yielded first</verify>
  <done>MergeRequestContainer.compose() yields assigned_to_me_section before opened_by_me_section</done>
</task>

</tasks>

<verification>
- All 3 minor/cosmetic gaps from UAT.md are addressed
- Merge Requests section has visible header label (gap #1)
- Loading spinners are centered in their containers (gap #2)
- MR subsections display in correct order: Assigned left, Opened right (gap #3)
</verification>

<success_criteria>
1. Dashboard shows "Merge Requests" label above the two MR subsections
2. Loading spinners appear centered both vertically and horizontally
3. "Assigned to me" appears on the left, "Opened by me" on the right
</success_criteria>

<output>
After completion, create `.planning/phases/03-dashboard-ui/03-05-SUMMARY.md` documenting the fixes for the three UI/layout issues.
</output>
